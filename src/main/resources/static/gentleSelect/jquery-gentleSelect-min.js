(function(d){var f={minWidth:100,itemWidth:undefined,columns:undefined,rows:undefined,title:undefined,prompt:"Make A Selection",maxDisplay:0,openSpeed:400,closeSpeed:400,openEffect:"slide",closeEffect:"slide",hideOnMouseOut:true};function g(h){if(typeof h=="undefined"){return false}else{return true}}function a(i,h){if(g(h.columns)&&g(h.rows)){d.error("gentleSelect: You cannot supply both 'rows' and 'columns'");return true}if(g(h.columns)&&!g(h.itemWidth)){d.error("gentleSelect: itemWidth must be supplied if 'columns' is specified");return true}if(g(h.rows)&&!g(h.itemWidth)){d.error("gentleSelect: itemWidth must be supplied if 'rows' is specified");return true}if(!g(h.openSpeed)||typeof h.openSpeed!="number"&&(typeof h.openSpeed=="string"&&(h.openSpeed!="slow"&&h.openSpeed!="fast"))){d.error('gentleSelect: openSpeed must be an integer or "slow" or "fast"');return true}if(!g(h.closeSpeed)||typeof h.closeSpeed!="number"&&(typeof h.closeSpeed=="string"&&(h.closeSpeed!="slow"&&h.closeSpeed!="fast"))){d.error('gentleSelect: closeSpeed must be an integer or "slow" or "fast"');return true}if(!g(h.openEffect)||(h.openEffect!="fade"&&h.openEffect!="slide")){d.error("gentleSelect: openEffect must be either 'fade' or 'slide'!");return true}if(!g(h.closeEffect)||(h.closeEffect!="fade"&&h.closeEffect!="slide")){d.error("gentleSelect: closeEffect must be either 'fade' or 'slide'!");return true}if(!g(h.hideOnMouseOut)||(typeof h.hideOnMouseOut!="boolean")){d.error('gentleSelect: hideOnMouseOut must be supplied and either "true" or "false"!');return true}return false}function c(i,j){if(i.length<1){return j.prompt}if(j.maxDisplay!=0&&i.length>j.maxDisplay){var h=i.slice(0,j.maxDisplay).map(function(){return d(this).text()});h.push("...")}else{var h=i.map(function(){return d(this).text()})}return h.get().join(", ")}var b={init:function(v){var k=d.extend({},f,v);if(a(this,k)){return this}this.hide();label_text=c(this.find(":selected"),k);var r=d("<span class='gentleselect-label'>"+label_text+"</span>").insertBefore(this).bind("mouseenter.gentleselect",e.labelHoverIn).bind("mouseleave.gentleselect",e.labelHoverOut).bind("click.gentleselect",e.labelClick).data("root",this);this.data("label",r).data("options",k);var n=d("<ul></ul>");this.find("option").each(function(){var i=d("<li>"+d(this).text()+"</li>").data("value",d(this).attr("value")).data("name",d(this).text()).appendTo(n);if(d(this).attr("selected")){i.addClass("selected")}});var p=d("<div class='gentleselect-dialog'></div>").append(n).insertAfter(r).bind("click.gentleselect",e.dialogClick).bind("mouseleave.gentleselect",e.dialogHoverOut).data("label",r).data("root",this);this.data("dialog",p);if(g(k.columns)||g(k.rows)){n.css("float","left").find("li").width(k.itemWidth).css("float","left");var m=n.find("li:first");var j=k.itemWidth+parseInt(m.css("padding-left"))+parseInt(m.css("padding-right"));var s=n.find("li").length;if(g(k.columns)){var q=parseInt(k.columns);var u=Math.ceil(s/q)}else{var u=parseInt(k.rows);var q=Math.ceil(s/u)}p.width(j*q);for(var l=0;l<(u*q)-s;l++){d("<li style='float:left' class='gentleselect-dummy'><span>&nbsp;</span></li>").appendTo(n)}var h=[];var t=0;n.find("li").each(function(){if(t<u){h[t]=d(this)}else{var i=t%u;d(this).insertAfter(h[i]);h[i]=d(this)}t++})}else{if(typeof k.minWidth=="number"){p.css("min-width",k.minWidth)}}if(g(k.title)){d("<div class='gentleselect-title'>"+k.title+"</div>").prependTo(p)}d(document).bind("keyup.gentleselect",e.keyUp);return this},update:function(){var j=this.data("options");var h=(this.attr("multiple"))?this.val():[this.val()];d("li",this.data("dialog")).each(function(){var l=d(this);var k=(d.inArray(l.data("value"),h)!=-1);l.toggleClass("selected",k)});var i=c(this.find(":selected"),j);this.data("label").text(i);return this}};var e={labelHoverIn:function(){d(this).addClass("gentleselect-label-highlight")},labelHoverOut:function(){d(this).removeClass("gentleselect-label-highlight")},labelClick:function(){var k=d(this);var l=k.position();var h=k.data("root");var j=h.data("options");var i=h.data("dialog").css("top",l.top+k.height()).css("left",l.left+1);if(j.openEffect=="fade"){i.fadeIn(j.openSpeed)}else{i.slideDown(j.openSpeed)}},dialogHoverOut:function(){var h=d(this);if(h.data("root").data("options").hideOnMouseOut){h.hide()}},dialogClick:function(j){var l=d(j.target);var k=d(this);var h=k.data("root").data("options");if(h.closeEffect=="fade"){k.fadeOut(h.closeSpeed)}else{k.slideUp(h.closeSpeed)}if(l.is("li")&&!l.hasClass("gentleselect-dummy")){var n=l.data("value");var i=l.data("name");var m=k.data("label");if(k.data("root").attr("multiple")){l.toggleClass("selected");var p=k.find("li.selected");m.text(c(p,h));var o=p.map(function(){return d(this).data("value")});k.data("root").val(o.get()).trigger("change")}else{k.find("li.selected").removeClass("selected");l.addClass("selected");m.text(l.data("name"));k.data("root").val(n).trigger("change")}}},keyUp:function(h){if(h.keyCode==27){d(".gentleselect-dialog").hide()}}};d.fn.gentleSelect=function(h){if(b[h]){return b[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){return b.init.apply(this,arguments)}else{d.error("Method "+h+" does not exist on jQuery.gentleSelect")}}}})(jQuery);